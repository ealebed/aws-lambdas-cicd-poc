# Lambda Configuration
# This file defines the configuration for this Lambda function
# Used by CI/CD workflows for deployment
# All values are optional and have defaults if not specified

lambda:
  # Function name (defaults to folder name if not specified)
  name: javascript_2_example

  # Function description
  description: "JavaScript Lambda example #2"

  # Runtime configuration
  memory_size: 512  # MB (128-10240, must be multiple of 64)
  timeout: 60       # seconds (1-900)
  ephemeral_storage: 1024  # MB (512-10240)
  architectures: x86_64  # x86_64 or arm64

  # Environment variables
  environment:
    variables:
      GREETING: "Hello from JavaScript Lambda #2!"
      NODE_ENV: "development"

  # Role ARN (optional: set here or in the GitHub repository as a secret in related environment)
  role_arn: "arn:aws:iam::531438381462:role/lambda-execution-role"

  # VPC configuration (optional)
  # vpc_config:
  #   subnet_ids:
  #     - "subnet-12345678"
  #     - "subnet-87654321"
  #   security_group_ids:
  #     - "sg-12345678"

  # Dead letter queue configuration (optional)
  # dead_letter_config:
  #   target_arn: "arn:aws:sqs:region:account:dlq-name"

  # KMS key ARN for encryption (optional)
  # kms_key_arn: "arn:aws:kms:region:account:key/key-id"

  # X-Ray tracing configuration (optional)
  # tracing_config:
  #   mode: "Active"  # PassThrough or Active

  # Lambda layers (ARNs) - only for ZIP packages, not container images
  # layers:
  #   - "arn:aws:lambda:region:account:layer:layer-name:version"

  # EFS file system configuration (optional)
  # file_system_configs:
  #   - arn: "arn:aws:elasticfilesystem:region:account:file-system/fs-id"
  #     local_mount_path: "/mnt/efs"

  # Container image configuration (optional)
  # image_config:
  #   command:
  #     - "app.handler"
  #   entry_point:
  #     - "/lambda-entrypoint.sh"
  #   working_directory: "/var/task"

  # SnapStart configuration (optional, Java only)
  # snap_start:
  #   apply_on: "PublishedVersions"  # None or PublishedVersions

  # CloudWatch Logs configuration (optional)
  # logging_config:
  #   log_format: "JSON"  # JSON or Text
  #   log_group: "/aws/lambda/function-name"
  #   application_log_level: "INFO"  # TRACE, DEBUG, INFO, WARN, ERROR, FATAL
  #   system_log_level: "INFO"  # DEBUG, INFO, WARN

  # Code signing configuration ARN (optional)
  # code_signing_config_arn: "arn:aws:lambda:region:account:code-signing-config:config-id"

  # Publish new version after update (default: true)
  publish: true

  # Tags (will be merged with dynamic tags: Environment, Region, Version, Language, Service)
  tags:
    Team: "platform"

deploy:
  dev:
    regions: []
  test:
    regions: [eu-west-1, us-east-1]
  prod:
    regions: [eu-west-1, us-east-1]
